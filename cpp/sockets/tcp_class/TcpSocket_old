
#include <stdio.h>
#include <stdlib.h>
#include <netdb.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>
#include <time.h>
#include <arpa/inet.h>
#include <errno.h>
#include <sys/socket.h>
//#include <"TcpSocket.hpp">

class TcpSocket{
    public:
        void TcpSocket(int sndsize, int rcvsize,int timeout){
            createSocket(timeout);
        };
        void ~TcpSocket();
        void ConnectSocket(string host, int port);
        void ListenSocket(int queueSize);
        void disconnectSocket();
    private:
        int sock;

        void createSocket(int timeout){
            struct timeval sock_timeout;
            sock = socket(AF_INET, SOCK_STREAM,0);
            if(sock<0){
                throw out_of_range("");
            }
            if(timeout<0)
                timeout=0;
            sock_timeout.tv_sec = timeout;
            if(setsockopt(sock, SOL_SOCKET, SO_SNDTIMEO, &sock_timeout, sizeof(struct timeval)))
                throw out_of_range("");
        
           if(setsockopt(sock, SOL_SOCKET, SO_RCVTIMEO, &sock_timeout, sizeof(struct timeval)))
                throw out_of_range("");
        }
}
